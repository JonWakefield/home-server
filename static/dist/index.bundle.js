(()=>{function e(){var e,t="list-group-item list-group-item-action py-3 lh-sm",n="d-flex w-100 align-items-center",s="mb-1 fs-2 fw-semibold",o=document.getElementById("createAccModal"),a=document.getElementById("openAccModal"),r=document.getElementsByClassName("btn-close")[0],i=document.getElementsByClassName("btn-close")[1],c=document.getElementById("modalForm"),l=document.getElementById("modalSignInForm"),d=document.getElementById("createAccName"),u=document.getElementById("createAccPassword"),m=document.getElementById("showPasswordCreateAcc"),p=document.getElementById("createAccError"),y=document.getElementById("signInModal"),v=document.getElementById("signInPassword"),h=document.getElementById("showPasswordSignIn"),f=document.getElementById("signInError");a.onclick=function(){o.style.display="block",m.addEventListener("change",(function(){var e=m.checked;u.type=e?"text":"password"}))},r.onclick=function(){o.style.display="none",u.value="",d.value="",m.checked=!1},i.onclick=function(){y.style.display="none",v.value="",f.style.display="none",v.classList.remove("err-input")},window.onclick=function(e){e.target==o?(o.style.display="none",u.value="",d.value="",p.style.display="none",d.classList.remove("err-input"),u.classList.remove("err-input"),m.checked=!1):e.target==y&&(y.style.display="none",v.value="",f.style.display="none",v.classList.remove("err-input"))},c.addEventListener("submit",(function(e){e.preventDefault();var t=d.value,n=u.value;if(!function(e){return/^[a-zA-Z0-9_]+$/.test(e)}(t))return d.classList.add("err-input"),p.textContent="Invalid Name",void(p.style.display="block");if(d.classList.remove("err-input"),p.style.display="none",!n)return u.classList.add("err-input"),p.textContent="Please enter a password",void(p.style.display="block");u.classList.remove("err-input"),p.style.display="none";var s={name:t,password:n};fetch("/api/createUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){if(success=e.success,!success)return message=e.message,p.textContent=message,void(p.style.display="block");window.location.reload(),o.style.display="none"})).catch((function(e){console.error("Error: ",e)}))})),l.addEventListener("submit",(function(t){t.preventDefault();var n=v.value;if(!n)return v.classList.add("err-input"),f.textContent="Please enter a password",void(f.style.display="block");v.classList.remove("err-input"),f.style.display="none";var s,o=y.dataset.accountId;e.forEach((function(e){e.id==o&&(s=e)}));var a={id:s.id,name:s.name,password:n};fetch("/api/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.ok||(f.textContent="HTTP Error: "+e.statusText,f.style.display="block"),e.json()})).then((function(e){var t=e.message;e.login?(window.location.href="/home?path=home",y.style.display="none",v.value="",f.style.display="none"):(f.textContent=t,f.style.display="block")})).catch((function(e){console.error("Error: ",e)}))})),console.log("Fetching user info..."),fetch("/api/retrieveUsers",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Failed to retrieve content "+e.statusText);return e.json()})).then((function(o){var a,r;a=e=o.user_info,r=document.getElementById("userListGroup"),a.forEach((function(o){var a=o.id,i=o.name,c=document.createElement("a"),l=document.createElement("div"),d=document.createElement("strong");c.dataset.accountId=a,l.className=n,c.className=t,d.className=s,d.textContent=i;var u=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("width","20"),e.setAttribute("height","20"),e.setAttribute("fill","currentColor"),e.setAttribute("class","bi bi-chevron-right"),e.setAttribute("viewBox","0 0 16 16");var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("fill-rule","evenodd"),t.setAttribute("d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"),e.appendChild(t),e}();l.appendChild(u),l.appendChild(d),c.appendChild(l),r.appendChild(c),c.addEventListener("click",(function(){var t,n;t=a,(n=e.find((function(e){return e.id===t})))&&(y.dataset.accountId=n.id,y.style.display="block",h.addEventListener("change",(function(){var e=h.checked;v.type=e?"text":"password"})))}))}))})).catch((function(e){console.error("Error: ",e)}))}document.addEventListener("DOMContentLoaded",(function(t){e()}))})();